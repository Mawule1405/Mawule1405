<app-client-nav-bar ></app-client-nav-bar>

<!--Présentation des détails-->
<div [ngClass]="{'show-modal-client': !panierEstAfficher, 'modal':panierEstAfficher}">
    <div class="header-panier">
        <div class="d-flex justify-content-between flex-row">
            <h6 class = "h6 mx-2 py-2">Votre panier est disponible!</h6>
        </div>
        <div class="d-flex justify-content-between flex-row align-items-center">
            
            <h6 class="h6 me-4">Montant total du panier: {{500000}} FCFA</h6> 
            <button class="btn btn-sm bg-success hover">Soumettre la commande</button>

        </div>
        <div class="d-flex justify-content-between flex-row align-items-center">
            <h6 class="h6 me-5">Nombre d'articles: {{lesLignesPaniers.length}}</h6>
            <button class="btn btn-outline-danger m-2" (click)="fermerPanier()">&times;</button>
        </div>
    </div>

    <div class="body-panier d-flex justify-content-between flex-wrap ">
        <!-- Utilisation de flexbox pour organiser les cartes -->
        <div class="card m-2 p-2 shadow-sm" *ngFor="let ligne of lesLignesPaniers" style="width: 18rem;">
          <div class="card-body d-flex flex-column align-items-between">
            <img src="../../assets/images/img_1.png" alt="" srcset="">

            <h5 class="">{{ ligne.article.libelle }}</h5>
      
            <!-- Détails du produit -->
            <!--<p class="small"><strong class="text-success">Spécialité:</strong> {{ ligne.article.specialitePharmaceutique.libelle }}</p>
            <p class="small"><strong class="text-success">Forme Galénique:</strong> {{ ligne.article.formeGalenique.nomFormeGalenique }}</p>
            <p class="small"><strong class="text-success">Concentration:</strong> {{ ligne.article.concentration }}</p> -->
            <p class="text-start small"><strong class="text-success">Quantité:</strong> {{ ligne.quantite }}</p>
            <p class="text-start small"><strong class="text-success">Prix unitaire:</strong> {{ ligne.article.prixGenerique}} FCFA</p>
            <p class="text-start small"><strong class="text-success">Total:</strong> {{ ligne.quantite * ligne.article.prixGenerique }} FCFA</p>
      
            <!-- Boutons d'action -->
            <div class="d-flex justify-content-between mt-3">
              <button id="btn-{{ ligne.id }}" class="btn btn-sm hover" (click)="retirerDuPanier(ligne)">
                <i class="bi bi-trash"></i> Retirer
              </button>
              <button class="btn btn-sm hover bg-success" (click)="changerLaQuantite(ligne)">
                <i class="bi bi-pencil"></i> Modifier
              </button>
            </div>
          </div>

          <!--Formulaire de changement de la quantite du produit-->
          <div id="form-{{ligne.id}}" [class]="ligneCourant==ligne?'show-modal-ligne-quantite':'modal'" class="p-3 bg-light border rounded">
            <!-- En-tête avec le titre et le bouton de fermeture -->
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h6 class="h6 text-start">Changer la quantité commandée <br><strong>{{ligne.article.libelle}}</strong></h6>
                <button class="btn btn-outline-danger btn-sm"  (click)="fermerFormulaireLigne()">&times;</button>
            </div>
        
        <!-- Formulaire -->
        <form class="w-100">
            <!-- Nouvelle quantité -->
            <div class="form-group mb-3">
                <label for="quantite">Nouvelle quantité <sup class="text-danger">*</sup></label>
                <input id="quantite" type="number" class="form-control" placeholder="0" required min="0">
            </div>
            
            <!-- Bouton d'enregistrement -->
            <div class="text-end">
                <button type="submit" class="btn btn-success">Enregistrer</button>
            </div>
        </form>
        
    </div>
        </div>
      </div>
      
</div>
